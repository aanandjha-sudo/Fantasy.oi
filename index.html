```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AI Chatbot Platform - Inspired by CrushOn, SpicyChat, Talkie</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      margin: 0; 
      padding: 0; 
      width: 100vw; 
      height: 100vh; 
      display: flex; 
      flex-direction: column; 
      background-color: #1a1a1a; 
      color: #fff; 
      overflow: hidden;
    }
    nav { 
      background-color: #000; 
      padding: 10px; 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      position: fixed; 
      width: 100%; 
      z-index: 10;
    }
    nav button { 
      background: none; 
      border: none; 
      color: #ff4b4b; 
      cursor: pointer; 
      font-size: 16px;
    }
    .menu-container {
      position: relative;
    }
    .menu-button {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }
    .dots {
      font-size: 24px;
      line-height: 1;
    }
    .menu-text {
      font-size: 10px;
    }
    .menu-dropdown {
      position: absolute;
      right: 0;
      top: 40px;
      background: #222;
      padding: 10px;
      border-radius: 8px;
      display: none;
      z-index: 20;
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    .menu-dropdown.active {
      display: block;
    }
    .menu-dropdown button {
      display: block;
      width: 100%;
      text-align: left;
      background: none;
      border: none;
      color: #fff;
      padding: 5px;
      cursor: pointer;
    }
    .close-menu {
      position: absolute;
      top: 5px;
      right: 5px;
      cursor: pointer;
      color: #ff4b4b;
    }
    .sidebar { 
      position: fixed; 
      left: 0; 
      top: 50px; 
      width: 200px; 
      height: calc(100vh - 50px); 
      background: #222; 
      padding: 20px; 
      overflow-y: auto; 
      z-index: 5;
      scroll-behavior: smooth; /* Smooth scrolling inspired by X */
    }
    .sidebar button { 
      display: block; 
      width: 100%; 
      margin: 10px 0; 
      background: #333; 
      color: #fff; 
      padding: 10px; 
      border: none; 
      cursor: pointer;
    }
    .container { 
      flex: 1; 
      display: flex; 
      padding: 60px 20px 20px 220px; 
      overflow: auto; 
      scroll-behavior: smooth;
    }
    .tab { 
      display: none; 
      width: 100%; 
    }
    .active { 
      display: block; 
    }
    .card { 
      background: #333; 
      border-radius: 8px; 
      padding: 15px; 
      margin: 10px; 
      box-shadow: 0 2px 5px rgba(255,0,0,0.2); 
      position: relative;
    }
    .edit-pencil { 
      position: absolute; 
      top: 5px; 
      right: 5px; 
      cursor: pointer; 
      color: #ff4b4b; 
      display: none;
    }
    .editable:hover .edit-pencil { 
      display: block; 
    }
    #chat-window { 
      height: 500px; 
      overflow-y: scroll; 
      border: 1px solid #ff4b4b; 
      padding: 10px; 
      margin: 10px 0; 
      background-size: cover; 
      background-position: center; 
      position: relative;
    }
    #3d-chat-bg { 
      position: absolute; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%; 
      z-index: -1; 
    }
    .loading { 
      text-align: center; 
      padding: 20px; 
      color: #ff4b4b; 
      animation: spin 1s linear infinite; /* Loading spinner inspired by X */
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    button { 
      background-color: #ff4b4b; 
      color: white; 
      border: none; 
      padding: 8px 16px; 
      border-radius: 4px; 
      cursor: pointer; 
      margin: 5px; 
    }
    input, select { 
      padding: 8px; 
      margin: 5px; 
      border: 1px solid #ff4b4b; 
      border-radius: 4px; 
      background: #222; 
      color: #fff;
    }
    #login-form { 
      position: fixed; 
      top: 50%; 
      left: 50%; 
      transform: translate(-50%, -50%); 
      background: #333; 
      padding: 20px; 
      border-radius: 8px; 
      z-index: 20; 
    }
    .model-card { 
      display: flex; 
      align-items: center; 
      margin: 10px; 
      padding: 10px; 
      background: #444; 
      border-radius: 8px;
      cursor: pointer;
    }
    .model-card img { 
      width: 100px; 
      height: 100px; 
      border-radius: 50%; 
      margin-right: 10px; 
      object-fit: cover;
    }
    body::before { 
      content: ''; 
      position: absolute; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%; 
      background: url('https://source.unsplash.com/random/1920x1080/?ai,futuristic,dark') no-repeat center center/cover; 
      opacity: 0.3; 
      z-index: -1;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/three@0.167.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.167.1/examples/js/loaders/GLTFLoader.js"></script>
</head>
<body>
  <nav>
    <button onclick="showTab('user')">User Mode</button>
    <button onclick="showTab('admin')">Host Mode</button>
    <div class="menu-container">
      <div class="menu-button" onclick="toggleMenu()">
        <div class="dots">•••</div>
        <div class="menu-text">menu</div>
      </div>
      <div class="menu-dropdown" id="menu-dropdown">
        <span class="close-menu" onclick="toggleMenu()">❌</span>
        <button onclick="showSection('home')">Home</button>
        <button onclick="showSection('previous-chats')">Previous Chats</button>
        <button onclick="showSection('my-models')">My Models</button>
        <button onclick="showSection('3d-models')">My 3D Models</button>
        <button onclick="showSection('rankings')">Rankings</button>
        <button onclick="logout()">Logout</button>
      </div>
    </div>
  </nav>
  <div class="sidebar">
    <!-- Sidebar options moved to menu -->
  </div>
  <div class="container">
    <div id="user" class="tab">
      <div id="home-section" class="section active">
        <div class="card editable" id="home-card">
          <span class="edit-pencil" onclick="editElement('home-card')">✏️</span>
          <h2>Welcome to AI Chat Platform</h2>
          <p>Inspired by CrushOn, SpicyChat, Talkie - Create and chat with custom AI models!</p>
          <img src="https://source.unsplash.com/random/400x200/?ai,character" alt="Random AI Image">
        </div>
        <div class="card">
          <h2>Published Models (Home Feed)</h2>
          <div id="home-published-models" class="loading">Loading...</div>
        </div>
        <div class="card">
          <h2>Create AI Model</h2>
          <input id="model-name" type="text" placeholder="Model Name">
          <input id="model-desc" type="text" placeholder="Description">
          <input id="model-personality" type="text" placeholder="Personality (e.g., friendly, sassy)">
          <input id="model-traits" type="text" placeholder="Traits (comma-separated)">
          <input id="model-category" type="text" placeholder="Category (e.g., anime, roleplay)">
          <input id="model-tags" type="text" placeholder="Tags (comma-separated)">
          <input id="model-image" type="file" accept="image/*">
          <button onclick="createAIModel()">Create</button>
        </div>
        <div class="card">
          <h2>Chat with Selected Model</h2>
          <div id="chat-window" style="position: relative;">
            <div id="3d-chat-bg"></div>
          </div>
          <input id="chat-input" type="text" placeholder="Type message...">
          <button onclick="sendChatMessage()">Send</button>
          <input id="bg-image" type="file" accept="image/*">
          <button onclick="setChatBackgroundImage()">Set Image Background</button>
          <input id="bg-3d" type="file" accept=".glb,.gltf">
          <button onclick="setChatBackground3D()">Set 3D Background</button>
        </div>
        <div class="card">
          <button onclick="showPayment('donate')">Donate</button>
          <button onclick="showPayment('subscribe')">Subscribe</button>
          <div id="payment-details" style="display: none;"></div>
        </div>
      </div>
      <div id="previous-chats-section" class="section" style="display: none;">
        <h2>Previous Chats</h2>
        <div id="previous-chats"></div>
      </div>
      <div id="my-models-section" class="section" style="display: none;">
        <h2>My Models</h2>
        <div id="user-models"></div>
        <button onclick="publishAIModel()">Publish Selected</button>
      </div>
      <div id="3d-models-section" class="section" style="display: none;">
        <h2>My 3D Models</h2>
        <div id="user-3d-models"></div>
      </div>
      <div id="rankings-section" class="section" style="display: none;">
        <h2>Rankings</h2>
        <div id="ranking-list"></div>
      </div>
    </div>

    <div id="admin" class="tab">
      <div class="card">
        <h2>Host Settings</h2>
        <input id="ai-api-key" type="text" placeholder="Connect AI API Key (e.g., Grok/OpenAI)">
        <button onclick="connectAI()">Connect AI</button>
        <input id="upi-id" type="text" placeholder="UPI ID (e.g., user@upi)">
        <input id="upi-qr" type="file" accept="image/*">
        <button onclick="savePaymentDetails()">Save Payment Details</button>
      </div>
      <div class="card">
        <h2>Admin Management</h2>
        <input id="ban-user" type="text" placeholder="Ban User (username)">
        <button onclick="banUser()">Ban</button>
        <button onclick="resetChanges()">Reset All Changes</button>
      </div>
      <div class="card">
        <h2>Customize User Page</h2>
        <p>Edits apply globally. Use pencil icons on user page in host mode.</p>
      </div>
      <div id="admin-info" class="card"></div>
    </div>
  </div>

  <div id="login-form">
    <h2>Login</h2>
    <input id="username" type="text" placeholder="Username (UID)">
    <input id="password" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>

  <script>
    let currentUser = null;
    let currentChatModel = null;
    let chatHistory = [];
    const globalStyles = getData('globalStyles') || {};
    const users = getData('users') || []; // Stored users for login

    // Show login on load
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('login-form').style.display = 'block';
      applyGlobalStyles();
      const urlParams = new URLSearchParams(window.location.search);
      const role = urlParams.get('role') || 'user';
      showTab(role);
      if (role === 'host') {
        document.querySelectorAll('.edit-pencil').forEach(p => p.style.display = 'block');
      }
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.menu-container')) toggleMenu(false);
      });
    });

    // Menu toggle
    function toggleMenu(show = true) {
      const dropdown = document.getElementById('menu-dropdown');
      dropdown.classList.toggle('active', show);
    }

    // Login functions
    function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const banned = getData('bannedUsers') || [];
      if (banned.includes(username)) return alert('You are banned.');
      
      let isHost = false;
      if (username === 'host_leader' && password === 'Akj@@8051964008') {
        isHost = true;
      } else {
        // Check user credentials
        const user = users.find(u => u.uid === username && u.password === password);
        if (!user) {
          // Create new user if not exists
          if (prompt('New user? Enter "yes" to create.') === 'yes') {
            users.push({ uid: username, password });
            saveData('users', users);
          } else {
            return alert('Invalid credentials');
          }
        }
      }

      currentUser = { uid: username, role: isHost ? 'host' : 'user' };
      saveData('currentUser', currentUser);
      document.getElementById('login-form').style.display = 'none';
      initAfterLogin();
    }

    function logout() {
      currentUser = null;
      saveData('currentUser', null);
      location.reload();
    }

    function initAfterLogin() {
      updateUserModels();
      updateHomePublishedModels();
      updatePublishedModels();
      updatePreviousChats();
      updateUser3DModels();
      updateRanking();
      updateAdminInfo();
      render3DModel();
      document.getElementById('home-published-models').classList.remove('loading');
    }

    // Other functions remain similar, with adjustments for loading and scrolling
    // For example, add loading class when fetching data
    function updateHomePublishedModels() {
      document.getElementById('home-published-models').classList.add('loading');
      setTimeout(() => { // Simulate load
        let models = getData('userModels') || [];
        models = models.filter(m => m.published);
        document.getElementById('home-published-models').innerHTML = models.map(m => `
          <div class="model-card" onclick="startChatWithModel('${m.name}')">
            <img src="${m.imageUrl}" alt="${m.name}">
            <div>
              <h3>${m.name} by ${m.creator}</h3>
              <p>${m.desc}</p>
              <p>Likes: ${m.likes}</p>
              <button onclick="event.stopPropagation(); likeModel('${m.name}')">Like</button>
            </div>
          </div>
        `).join('');
        document.getElementById('home-published-models').classList.remove('loading');
      }, 1000); // Mock delay
    }

    // Rest of the script remains as in previous version, with deeper UI enhancements like smooth scrolling already added via CSS
  </script>
</body>
</html>
```
